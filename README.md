
<center><h1> Proyecto Despliegue Soluciones AnalÃ­ticas</h1></center>

## Problema y contexto

El desafÃ­o principal que se aborda en este proyecto estÃ¡ relacionado con la inconsistencia e imprevisibilidad de los retrasos en vuelos comerciales generados por una compleja interacciÃ³n entre diferentes factores como las condiciones climÃ¡ticas, la temporada del aÃ±o, la aerolÃ­nea, el origen, el destino, entre otros. Este problema impacta directamente la experiencia de los pasajeros y la eficiencia de las aerolÃ­neas conllevando a costos adicionales, interrupciones en la operaciÃ³n y una disminuciÃ³n en la calidad del servicio.

## Pregunta de negocio y alcance del proyecto

Â¿CÃ³mo podemos predecir con precisiÃ³n los retrasos de vuelos comerciales utilizando datos histÃ³ricos de vuelos y condiciones climÃ¡ticas durante el perÃ­odo de abril a octubre de 2013?

**Alcance del Proyecto:**

-	RecopilaciÃ³n, limpieza y transformaciÃ³n de datos de vuelos comerciales y registros climatolÃ³gicos del periodo de interÃ©s (abril a octubre de 2013).
-	IntegraciÃ³n de los conjuntos de datos.
-	ExploraciÃ³n de los conjuntos de datos.
-	SelecciÃ³n y entrenamiento de modelos para la predicciÃ³n de retrasos.
- Registro de modelos y experimentos en mlflow.
-	CreaciÃ³n de tablero de visualizaciÃ³n de datos histÃ³ricos.
- CreaciÃ³n del paquete con el modelo entrenado.
- CreaciÃ³n del API que albergarÃ¡ el modelo entrenado para predecir.
-	IntegraciÃ³n del tablero con una interfaz de captura de datos para realizar predicciones de retrasos.
- IntegraciÃ³n del tablero con el API.
-	Despliegue y operaciÃ³n de la soluciÃ³n (incluye tablero y API).
-	Todo lo anterior, realizado bajo las mejores prÃ¡cticas de MLOPS para el versionamiento de modelos, cÃ³digo, experimentos y su reproducibilidad.
-	El objetivo final del proyecto es proporcionar informaciÃ³n Ãºtil para la toma de decisiones operativas y estratÃ©gicas en aerolÃ­neas y aeropuertos.


## DescripciÃ³n de los datos utilizados en este proyecto

Los datos se obtienen del BurÃ³ de EstadÃ­sticas de Transporte del Departamento de Transporte de los Estados Unidos (DOT) quien realiza un seguimiento puntual de los vuelos nacionales operados por grandes transportistas aÃ©reos.

En este proyecto vamos a trabajar con datos de vuelos y condiciones climÃ¡ticas que contienen informaciÃ³n diaria de abril a octubre de 2013. La base de vuelos contiene 14 variables y poco mÃ¡s de 1 millÃ³n de registros y la base de condiciones climÃ¡ticas tiene 26 columnas y mÃ¡s de 400.000 registros.

En tÃ©rminos generales tenemos informaciÃ³n de origen, destino, fechas, horas, retrasos, cancelaciones e informaciÃ³n climÃ¡tica de cada vuelo en ese periodo.

La informaciÃ³n se descarga directamente de la pÃ¡gina del BurÃ³ https://www.bts.dot.gov/ en formato csv lo cual permite el fÃ¡cil acceso, mantenimiento y divulgaciÃ³n.

## Archivos y estructura del repositorio

```
ğŸ“¦ proyecto_despliegue_soluciones
 â”£ ğŸ“„ ExploraciÃ³n_base_vuelos.ipynb --> Notebook con la preprocesamiento y exploraciÃ³n de la base de vuelos.
 â”£ ğŸ“„ ExploraciÃ³n_base_clima.ipynb --> Notebook con la preprocesamiento y exploraciÃ³n de la base de clima.
 â”£ ğŸ“„ IntegraciÃ³n_base_final.ipynb --> Notebook con la integraciÃ³n de las bases de clima y vuelos.
 â”£ ğŸ“„ Modelado final.ipynb --> Notebook con el entrenamiento del modelo final definitivo usado en el API.
 â”£ ğŸ“„ Merge_nombres.py --> Script de Python con unificaciÃ³n valores de referencia con nombres de aerolineas y aeropuertos.
 â”£ ğŸ“„ mlflow-flight-delay.py --> Script de python para registrar los experimentos de entrenamiento y evaluaciÃ³n en mlflow.
 â”£ ğŸ“„ mlflow_flight_delay_VF.py --> Script de python para registrar experimentos en mlflow. VersiÃ³n final.
 â”£ ğŸ“„ README.md --> Documento de orientaciÃ³n y explicaciÃ³n del proyecto y sus archivos.
 â”£ ğŸ“„ .dvcignore --> Define archivos a ignorar por el sistema de control de versiones en relaciÃ³n con los datos.
 â”£ ğŸ“‚ .dvc --> Carpeta con la configuraciÃ³n de DVC.
 â”£ ğŸ“‚ api --> Carpeta con el codigo fuente del api (servidor que expone la predicciÃ³n).
 â”ƒ â”£ ğŸ“„ Dockerfile --> Archivo Dockerfile para el despliegue del api como contenedor.
 â”ƒ â”£ ğŸ“‚ flights-delay-api --> Carpeta con el codigo fuente del api.
 â”ƒ â”ƒ â”£ ğŸ“‚ app --> Carpeta que contiene el cÃ³digo fuente del api.
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚ schemas --> Carpeta con los schemas del api.
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ __init__.py --> Archivo de inicializaciÃ³n e import de schemas.
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ health.py --> Esquema del mÃ©todo health.
 â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“„ predict.py --> Esquema del mÃ©todo predict.
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚ test --> Pruebas unitarias del api.
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ __init__.py --> Archivo init.
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ conftest.py --> Archivo de configuraciÃ³n de las pruebas unitarias.
 â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“„ test_api.py --> Pruebas unitarias.
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ __init__.py --> Codigo del archivo init que contien la versiÃ³n del api.
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ api.py --> Codigo fuente api.
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ config.py --> Codigo fuente de la configuraciÃ³n del api.
 â”ƒ â”ƒ â”ƒ â”— ğŸ“„ main.py --> Codigo fuente principal (main) del api.
 â”ƒ â”ƒ â”£ ğŸ“‚ model-pkg --> Carpeta con el modelo empaquetado.
 â”ƒ â”ƒ â”ƒ â”— ğŸ“„ model_flights_delays-0.0.1-py3-none-any.whl --> Modelo empaquetado.
 â”ƒ â”ƒ â”£ ğŸ“„ tox..ini --> Archivo de configuraciÃ³n del tox.
 â”ƒ â”ƒ â”£ ğŸ“„ .python-version --> Archivo que especifica la versiÃ³n de python requerida.
 â”ƒ â”ƒ â”£ ğŸ“„ mypy.ini --> Archivo de configuraciÃ³n.
 â”ƒ â”ƒ â”£ ğŸ“„ Procfile --> Archivo de configuraciÃ³n.
 â”ƒ â”ƒ â”£ ğŸ“„ requirements.txt --> Archivo de requerimientos.
 â”ƒ â”ƒ â”£ ğŸ“„ test_requirements.txt --> Archivo de requerimientos de prueba.
 â”ƒ â”ƒ â”£ ğŸ“„ typing_requirements.txt --> Archivo de requerimientos de escritura de cÃ³digo.
 â”ƒ â”— â”— ğŸ“„ run.sh --> Shell script que ejecuta el api.
 â”£ ğŸ“‚ client --> Carpeta con el codigo fuente del cliente (tablero).
 â”ƒ â”£ ğŸ“„ Dockerfile --> Archivo Dockerfile para el despliegue del tablero como contenedor.
 â”ƒ â”£ ğŸ“‚ app --> Carpeta con el codigo fuente del tablero.
 â”ƒ â”ƒ â”£ ğŸ“„ app.py --> Codigo fuente tablero en dash.
 â”ƒ â”ƒ â”£ ğŸ“„ .python-version --> Archivo que especifica la versiÃ³n de python requerida.
 â”ƒ â”ƒ â”£ ğŸ“„ mypy.ini --> Archivo de configuraciÃ³n.
 â”ƒ â”ƒ â”£ ğŸ“„ Procfile --> Archivo de configuraciÃ³n.
 â”ƒ â”ƒ â”£ ğŸ“„ requirements.txt --> Archivo de requerimientos.
 â”ƒ â”ƒ â”£ ğŸ“„ test_requirements.txt --> Archivo de requerimientos de prueba.
 â”ƒ â”ƒ â”£ ğŸ“„ run.sh --> Shell script que ejecuta el tablero.
 â”ƒ â”ƒ â”£ ğŸ“‚ assets --> Carpeta con estilos css del tablero y data histÃ³rica.
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ base.css --> Archivo con estilos css base.
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ clinical-analytics.css --> Archivo con estilos css.
 â”ƒ â”— â”— â”— ğŸ“„ resultado_merge.csv --> Archivo csv con data histÃ³rica.
 â”£ ğŸ“‚ data --> Carpeta con los datos a trabajar.
 â”ƒ â”£ ğŸ“„ Weather Dataset.csv.dvc --> Archivo con los metadatos de DVC del conjunto de datos de condiciones climÃ¡ticas.
 â”ƒ â”£ ğŸ“„ Flight Delays Data.csv.dvc --> Archivo con los metadatos de DVC del conjunto de datos de vuelos.
 â”ƒ â”— ğŸ“„ .gitignore --> Archivo para ignorar archivos de datos (pues estos los maneja DVC).
 â”£ ğŸ“‚ model-package --> Carpeta con el codigo fuente del api (servidor que expone la predicciÃ³n).
 â”ƒ â”£ ğŸ“‚ dist --> Builds del paquete.
 â”ƒ â”ƒ â”£ ğŸ“„ model_flights_delays-0.0.1-py3-none-any.whl --> .whl del modelo empaquetado.
 â”ƒ â”ƒ â”— ğŸ“„ model-flights-delays-0.0.1.tar.gz --> .tar.gz del modelo empaquetado.
 â”ƒ â”£ ğŸ“‚ model --> Carpeta con el cÃ³digo fuente del paquete.
 â”ƒ â”ƒ â”£ ğŸ“‚ config --> Carpeta con los archivos de manejo de configuraciÃ³n.
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ __init__.py --> Archivo __init__.
 â”ƒ â”ƒ â”ƒ â”— ğŸ“„ core.py --> Script con los mÃ©todos para procesar la configuraciÃ³n.
 â”ƒ â”ƒ â”£ ğŸ“‚ datasets --> Carpeta con los datasets del modelo.
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ __init__.py --> Archivo __init__.
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ train.csv --> Datos de entrenamiento del modelo.
 â”ƒ â”ƒ â”ƒ â”— ğŸ“„ test.csv --> Datos de prueba del modelo.
 â”ƒ â”ƒ â”£ ğŸ“‚ processing --> Carpeta con los scripts de utilidad para manejar datos, features y validaciones.
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ __init__.py --> Archivo __init__.
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ data_manager.py --> Script para manejo de datos. 
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ features.py --> Script para manejo de features. 
 â”ƒ â”ƒ â”ƒ â”— ğŸ“„ validation.py --> Script para validaciÃ³n de schemas. 
 â”ƒ â”ƒ â”£ ğŸ“‚ trained --> Carpeta con los .pkl de los modelos entrenados.
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ __init__.py --> Archivo __init__.
 â”ƒ â”ƒ â”ƒ â”— ğŸ“„ model-flights-delays-output0.0.1.pkl --> .pkl del modelo entrenado
 â”ƒ â”ƒ â”£ ğŸ“„ __init__.py --> Archivo __init__ del paquete.
 â”ƒ â”ƒ â”£ ğŸ“„ config.yml --> Archivo de configuraciÃ³n con el diccionario de valores.
 â”ƒ â”ƒ â”£ ğŸ“„ pipeline.py --> Script de python con el pipeline de predicciÃ³n.
 â”ƒ â”ƒ â”£ ğŸ“„ predict.py --> Script con la lÃ³gica de predicciÃ³n.
 â”ƒ â”ƒ â”£ ğŸ“„ train_pipeline.py --> Script con la lÃ³gica o pipeline de entrenamiento.
 â”ƒ â”ƒ â”— ğŸ“„ VERSION --> Archivo que especifica la versiÃ³n del paquete.
 â”ƒ â”£ ğŸ“‚ requirements --> Archivo con los requerimientos del paquete.
 â”ƒ â”ƒ â”£ ğŸ“„ requirements.txt --> Archivo de requerimientos.
 â”ƒ â”ƒ â”£ ğŸ“„ test_requirements.txt --> Archivo de requerimientos de prueba.
 â”ƒ â”ƒ â”£ ğŸ“„ typing_requirements.txt --> Archivo de requerimientos de escritura de cÃ³digo.
 â”ƒ â”£ ğŸ“‚ tests --> Carpeta con el codigo fuente del api.
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ __init__.py --> Archivo init.
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“„ conftest.py --> Archivo de configuraciÃ³n de las pruebas unitarias.
 â”ƒ â”ƒ â”ƒ â”— ğŸ“„ test_prediction.py --> Pruebas unitarias de la predicciÃ³n del paquete.
 â”ƒ â”ƒ â”£ ğŸ“„ MANIFEST.in --> Archivo que define las rutas a incluir en el paquete.
 â”ƒ â”ƒ â”£ ğŸ“„ mypy.ini --> Archivo de configuraciÃ³n.
 â”ƒ â”ƒ â”£ ğŸ“„ pyproject.toml --> Archivo de configuraciÃ³n del build.
 â”ƒ â”ƒ â”£ ğŸ“„ setup.py --> Script de configuraciÃ³n del paquete.
 â”ƒ â”— â”— ğŸ“„ tox.ini --> Archivo de configuraciÃ³n de tox para el paquete.
 â”£ ğŸ“‚ manuales --> Carpeta con los manuales de usuario e instalaciÃ³n del tablero.
 â”ƒ â”£ ğŸ“„ Manual Tablero.docx --> Manual de usuario del tablero en word.
 â”ƒ â”£ ğŸ“„ Manual Tablero.pdf --> Manual de usuario del tablero en pdf.
 â”ƒ â”£ ğŸ“„ Manual Despliegue API y Tablero Flight_Delay.docx --> Manual de instalaciÃ³n del tablero y api en word.
 â”— â”— ğŸ“„ Manual Despliegue API y Tablero Flight_Delay.pdf --> Manual de instalaciÃ³n del tablero y api en pdf.
 ```

# MLFlow
Con el mejor modelo validado en instancias locales, se procedio realizar en una maquina virtual la corrida con diferentes hiperparametros para encontrar el modelo con el mejor desempeÃ±o de posible e implementarlo en el tablero final.

## Integrantes del equipo
* Claudia Marcela Baquero Rico
* Johan Alberto Medina Cetina
* Daniel Hoyos Ospina
